{% extends "main/base.html" %}


{% block main_content %}
    {% if course is not None %}

    <h1>Course Details</h1>
    <h1>{{ course.cname }}</h1>

    <a href="/account/{{ course.owner }}" >by {{ course.owner }}</a>

    <h2>Rating: {{rating}}</h2>

    {% if lecture_list != 0 and lecture_slug != None %}
        {% if finished  %}
            <br><a href="/{{course.slug}}/{{ lecture_slug }}" class="btn btn-light" tabindex="-1" role="button" aria-disabled="true">RESTART</a>
        {% elif prog is None %}
            <br><a href="/{{course.slug}}/{{ lecture_slug }}" class="btn btn-light" tabindex="-1" role="button" aria-disabled="true">START</a>
        {% else %}
            <br><a href="/{{course.slug}}/{{ lecture_slug }}" class="btn btn-light" tabindex="-1" role="button" aria-disabled="true">CONTINUE</a>
        {% endif %}
    {% endif %}

    <h3>Description</h3>
    <a>{{ course.description }}</a>

    <h3>Including</h3>
    <a>{{ lecture_count }} lecture is included.<br></a>

    <iframe src={{ course.course_img }} width="230" height="200" target="_self"></iframe>


    {% if advertisement is not None %}
        <a><br>Advertisement<br></a>
        <a>{{advertisement.startdate}} ad username: {{advertisement.ad_username_id}}<br></a>
        <img src = {{ advertisement.advertisement }} width="290" height="180" ></img>
    {% endif %}


    {% if user_type == 2 %} <!-- advertiser -->
        <br><a href="/offer_ad/{{ course.slug }}" class="btn btn-primary" tabindex="-1" role="button" aria-disabled="true">Offer Ad</a>

        {% if is_wish == 0 %}
            <br><a href="/wishlist/add_to_wishlist/{{course.slug}}" class="btn btn-light" tabindex="-1" role="button" aria-disabled="true">Add to Favorites</a>
        {% else %}
            <br><a href="/wishlist/add_to_wishlist/{{course.slug}}" class="btn btn-light" tabindex="-1" role="button" aria-disabled="true">Remove from Favorites</a>
        {% endif %}
    {% else %}
        {% if not is_gift %}
            <br><form action={{ path|lower }} method="POST">
                {% csrf_token %}
                {{ form.errors }}
                {{ form.as_table }}
                <button type="submit"
                        class="btn btn-primary"
                        role="button">Add To Cart</button><br>
            </form>
        {% else %}
                <form action = "/cart/gift/{{ course.slug }}" method = "post">
                        {% csrf_token %}
                       <input type="submit" value="Add To Cart As Gift">
                </form>
        {% endif %}
    {% endif %}

    {% if is_owner == 0 and user_type != 2%}
        {% if is_wish == 0 %}
            <a href="/wishlist/add_to_wishlist/{{course.slug}}" class="btn btn-light" tabindex="-1" role="button" aria-disabled="true">Add to Wishlist</a>
        {% else %}
            <a href="/wishlist/add_to_wishlist/{{course.slug}}" class="btn btn-light" tabindex="-1" role="button" aria-disabled="true">Remove from Wishlist</a>
        {% endif %}

    {% endif %}

    <h3>Price {{course.price}}</h3>
    {% if course.price != discounted_price %}
        <h3>Discounted Price {{discounted_price}}</h3>
    {% endif %}

    {% if lecture_list is not None %}
        <ol>
            <h3><br>Lectures:<br></h3>
      {% for lecture in lecture_list %}
        {% if registered == 0 %}
            <li><p>{{ lecture.lecture_name }}</p></li>
        {% else %}
            <li><a href="/{{ course.slug }}/{{ lecture.lecture_slug }}">{{ lecture.lecture_name }}</a></li>
        {% endif %}
      {% endfor %}
    </ol>
    {% else %}
        <h3><br>No lectures in this course :(<br></h3>
    {% endif %}

    {% if comments is not None %}
        <h3><br>Comments:<br></h3>
        <ol>
        {% for comment in comments %}
            <li>{{ comment }}</li>
        {% endfor %}
        </ol>
    {% else %}
        <h3><br>No comments for this course :(<br></h3>
    {% endif %}

    {% else %}

        <h1>There is no such course in our database :/</h1>

    {% endif %}

{% endblock %}